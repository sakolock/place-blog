{"ast":null,"code":"import _regeneratorRuntime from \"/Users/stevenkolock/Desktop/Side_Projects/place-blog/node_modules/.pnpm/@babel+runtime@7.21.5/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/stevenkolock/Desktop/Side_Projects/place-blog/node_modules/.pnpm/@babel+runtime@7.21.5/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { hashPassword } from './utils';\nvar jwt = require('jsonwebtoken');\nvar register = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref) {\n    var username, email, password, res, data;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          username = _ref.username, email = _ref.email, password = _ref.password;\n          _context.prev = 1;\n          _context.next = 4;\n          return fetch(\"\".concat(process.env.RAZZLE_API_PATH, \"/users\"), {\n            method: 'POST',\n            params: {\n              user: {\n                username: username,\n                email: email,\n                password: hashPassword(password)\n              }\n            }\n          });\n        case 4:\n          res = _context.sent;\n          _context.next = 7;\n          return res.json();\n        case 7:\n          data = _context.sent;\n          console.log(data);\n          // jwt.sign(data, process.env.RAZZLE_JWT_SECRET)\n          return _context.abrupt(\"return\", data);\n        case 12:\n          _context.prev = 12;\n          _context.t0 = _context[\"catch\"](1);\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[1, 12]]);\n  }));\n  return function register(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar login = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_ref3) {\n    var email, password, res;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          email = _ref3.email, password = _ref3.password;\n          _context2.prev = 1;\n          _context2.next = 4;\n          return fetch(\"\".concat(process.env.RAZZLE_API_PATH, \"/users/sign_in\"), {\n            method: 'POST',\n            params: {\n              user: {\n                email: email,\n                password: hashPassword(password)\n              }\n            }\n          });\n        case 4:\n          res = _context2.sent;\n          _context2.next = 7;\n          return res.json();\n        case 7:\n          return _context2.abrupt(\"return\", _context2.sent);\n        case 10:\n          _context2.prev = 10;\n          _context2.t0 = _context2[\"catch\"](1);\n          console.error('arg');\n        case 13:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[1, 10]]);\n  }));\n  return function login(_x2) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nvar logout = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n    var res;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return fetch(\"\".concat(process.env.RAZZLE_API_PATH, \"/signout\"));\n        case 3:\n          res = _context3.sent;\n          _context3.next = 6;\n          return res.json();\n        case 6:\n          return _context3.abrupt(\"return\", _context3.sent);\n        case 9:\n          _context3.prev = 9;\n          _context3.t0 = _context3[\"catch\"](0);\n          console.error(_context3.t0);\n        case 12:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 9]]);\n  }));\n  return function logout() {\n    return _ref5.apply(this, arguments);\n  };\n}();\nvar getCurrentUser = function getCurrentUser() {\n  // return JSON.parse(localStorage.getItem(\"user\"));\n};\nexport { register, login, logout, getCurrentUser };","map":{"version":3,"names":["hashPassword","jwt","require","register","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","username","email","password","res","data","wrap","_callee$","_context","prev","next","fetch","concat","process","env","RAZZLE_API_PATH","method","params","user","sent","json","console","log","abrupt","t0","stop","_x","apply","arguments","login","_ref4","_callee2","_ref3","_callee2$","_context2","error","_x2","logout","_ref5","_callee3","_callee3$","_context3","getCurrentUser"],"sources":["/Users/stevenkolock/Desktop/Side_Projects/place-blog/src/api/auth.js"],"sourcesContent":["import { hashPassword } from './utils';\n\nconst jwt = require('jsonwebtoken');\n\nconst register = async ({username, email, password}) => {\n  try {\n    const res = await fetch(`${process.env.RAZZLE_API_PATH}/users`, {\n      method: 'POST',\n      params: {\n        user: {\n          username,\n          email,\n          password: hashPassword(password)\n        }\n      }\n    });\n    const data = await res.json();\n    console.log(data);\n    // jwt.sign(data, process.env.RAZZLE_JWT_SECRET)\n    return data;\n  } catch (e) {\n\n  }\n};\n\nconst login = async ({email, password}) => {\n  try {\n    const res = await fetch(`${process.env.RAZZLE_API_PATH}/users/sign_in`, {\n      method: 'POST',\n      params: {\n        user: {\n          email,\n          password: hashPassword(password),\n        }\n      }\n    })\n    return await res.json();\n  } catch (error) {\n    console.error('arg')\n  }\n};\n\nconst logout = async () => {\n  // localStorage.removeItem(\"user\");\n  try {\n    const res = await fetch(`${process.env.RAZZLE_API_PATH}/signout`);\n    return await res.json();\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nconst getCurrentUser = () => {\n  // return JSON.parse(localStorage.getItem(\"user\"));\n};\n\nexport {\n  register,\n  login,\n  logout,\n  getCurrentUser,\n};\n"],"mappings":";;AAAA,SAASA,YAAY,QAAQ,SAAS;AAEtC,IAAMC,GAAG,GAAGC,OAAO,CAAC,cAAc,CAAC;AAEnC,IAAMC,QAAQ;EAAA,IAAAC,KAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAAC,IAAA;IAAA,IAAAC,QAAA,EAAAC,KAAA,EAAAC,QAAA,EAAAC,GAAA,EAAAC,IAAA;IAAA,OAAAR,mBAAA,GAAAS,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAQT,QAAQ,GAAAD,IAAA,CAARC,QAAQ,EAAEC,KAAK,GAAAF,IAAA,CAALE,KAAK,EAAEC,QAAQ,GAAAH,IAAA,CAARG,QAAQ;UAAAK,QAAA,CAAAC,IAAA;UAAAD,QAAA,CAAAE,IAAA;UAAA,OAE5BC,KAAK,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,eAAe,aAAU;YAC9DC,MAAM,EAAE,MAAM;YACdC,MAAM,EAAE;cACNC,IAAI,EAAE;gBACJjB,QAAQ,EAARA,QAAQ;gBACRC,KAAK,EAALA,KAAK;gBACLC,QAAQ,EAAEZ,YAAY,CAACY,QAAQ;cACjC;YACF;UACF,CAAC,CAAC;QAAA;UATIC,GAAG,GAAAI,QAAA,CAAAW,IAAA;UAAAX,QAAA,CAAAE,IAAA;UAAA,OAUUN,GAAG,CAACgB,IAAI,CAAC,CAAC;QAAA;UAAvBf,IAAI,GAAAG,QAAA,CAAAW,IAAA;UACVE,OAAO,CAACC,GAAG,CAACjB,IAAI,CAAC;UACjB;UAAA,OAAAG,QAAA,CAAAe,MAAA,WACOlB,IAAI;QAAA;UAAAG,QAAA,CAAAC,IAAA;UAAAD,QAAA,CAAAgB,EAAA,GAAAhB,QAAA;QAAA;QAAA;UAAA,OAAAA,QAAA,CAAAiB,IAAA;MAAA;IAAA,GAAA1B,OAAA;EAAA,CAId;EAAA,gBAnBKL,QAAQA,CAAAgC,EAAA;IAAA,OAAA/B,KAAA,CAAAgC,KAAA,OAAAC,SAAA;EAAA;AAAA,GAmBb;AAED,IAAMC,KAAK;EAAA,IAAAC,KAAA,GAAAlC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAiC,SAAAC,KAAA;IAAA,IAAA9B,KAAA,EAAAC,QAAA,EAAAC,GAAA;IAAA,OAAAP,mBAAA,GAAAS,IAAA,UAAA2B,UAAAC,SAAA;MAAA,kBAAAA,SAAA,CAAAzB,IAAA,GAAAyB,SAAA,CAAAxB,IAAA;QAAA;UAAQR,KAAK,GAAA8B,KAAA,CAAL9B,KAAK,EAAEC,QAAQ,GAAA6B,KAAA,CAAR7B,QAAQ;UAAA+B,SAAA,CAAAzB,IAAA;UAAAyB,SAAA,CAAAxB,IAAA;UAAA,OAEfC,KAAK,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,eAAe,qBAAkB;YACtEC,MAAM,EAAE,MAAM;YACdC,MAAM,EAAE;cACNC,IAAI,EAAE;gBACJhB,KAAK,EAALA,KAAK;gBACLC,QAAQ,EAAEZ,YAAY,CAACY,QAAQ;cACjC;YACF;UACF,CAAC,CAAC;QAAA;UARIC,GAAG,GAAA8B,SAAA,CAAAf,IAAA;UAAAe,SAAA,CAAAxB,IAAA;UAAA,OASIN,GAAG,CAACgB,IAAI,CAAC,CAAC;QAAA;UAAA,OAAAc,SAAA,CAAAX,MAAA,WAAAW,SAAA,CAAAf,IAAA;QAAA;UAAAe,SAAA,CAAAzB,IAAA;UAAAyB,SAAA,CAAAV,EAAA,GAAAU,SAAA;UAEvBb,OAAO,CAACc,KAAK,CAAC,KAAK,CAAC;QAAA;QAAA;UAAA,OAAAD,SAAA,CAAAT,IAAA;MAAA;IAAA,GAAAM,QAAA;EAAA,CAEvB;EAAA,gBAfKF,KAAKA,CAAAO,GAAA;IAAA,OAAAN,KAAA,CAAAH,KAAA,OAAAC,SAAA;EAAA;AAAA,GAeV;AAED,IAAMS,MAAM;EAAA,IAAAC,KAAA,GAAA1C,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAyC,SAAA;IAAA,IAAAnC,GAAA;IAAA,OAAAP,mBAAA,GAAAS,IAAA,UAAAkC,UAAAC,SAAA;MAAA,kBAAAA,SAAA,CAAAhC,IAAA,GAAAgC,SAAA,CAAA/B,IAAA;QAAA;UAAA+B,SAAA,CAAAhC,IAAA;UAAAgC,SAAA,CAAA/B,IAAA;UAAA,OAGOC,KAAK,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,eAAe,aAAU,CAAC;QAAA;UAA3DX,GAAG,GAAAqC,SAAA,CAAAtB,IAAA;UAAAsB,SAAA,CAAA/B,IAAA;UAAA,OACIN,GAAG,CAACgB,IAAI,CAAC,CAAC;QAAA;UAAA,OAAAqB,SAAA,CAAAlB,MAAA,WAAAkB,SAAA,CAAAtB,IAAA;QAAA;UAAAsB,SAAA,CAAAhC,IAAA;UAAAgC,SAAA,CAAAjB,EAAA,GAAAiB,SAAA;UAEvBpB,OAAO,CAACc,KAAK,CAAAM,SAAA,CAAAjB,EAAE,CAAC;QAAC;QAAA;UAAA,OAAAiB,SAAA,CAAAhB,IAAA;MAAA;IAAA,GAAAc,QAAA;EAAA,CAEpB;EAAA,gBARKF,MAAMA,CAAA;IAAA,OAAAC,KAAA,CAAAX,KAAA,OAAAC,SAAA;EAAA;AAAA,GAQX;AAED,IAAMc,cAAc,GAAG,SAAjBA,cAAcA,CAAA,EAAS;EAC3B;AAAA,CACD;AAED,SACEhD,QAAQ,EACRmC,KAAK,EACLQ,MAAM,EACNK,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}