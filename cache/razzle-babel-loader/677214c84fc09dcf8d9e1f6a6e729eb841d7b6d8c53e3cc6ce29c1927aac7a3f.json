{"ast":null,"code":"import _regeneratorRuntime from \"/Users/stevenkolock/Desktop/Side_Projects/place-blog/node_modules/.pnpm/@babel+runtime@7.21.5/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/stevenkolock/Desktop/Side_Projects/place-blog/node_modules/.pnpm/@babel+runtime@7.21.5/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _jsxFileName = \"/Users/stevenkolock/Desktop/Side_Projects/place-blog/src/routes/blog/[id].jsx\",\n  _this = this;\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from 'react';\nimport { useParams } from \"react-router-dom\";\nimport DefaultLayout from \"../../components/Layout/Default\";\nimport Text from '../../components/Typography/Text';\nimport Date from '../../components/Common/Date';\nimport Comment from '../../components/Comment/Comment';\nimport { LOADING_TEXT_BASE } from '../../constants';\n\n// {\"post\": {\"id\": 1, \"title\": \"A new post\", \"body\": \"Something very interesting!\", \"created_at\": \"2021-11-09T16:04:51.895Z\", \"updated_at\": \"2021-11-09T16:04:51.895Z\", \"comment_count\": 1, \"user\": {\"id\": 1, \"display_name\": \"Superman\"}}}\n\nvar Post = function Post() {\n  var _useParams = useParams(),\n    id = _useParams.id;\n  var _useState = useState(null),\n    post = _useState[0],\n    setPost = _useState[1];\n  var _useState2 = useState(null),\n    comments = _useState2[0],\n    setComments = _useState2[1];\n  useEffect(function () {\n    var getPost = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var res, _yield$res$json, _post;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return fetch(\"\".concat(process.env.RAZZLE_API_PATH, \"/posts/\").concat(id));\n            case 3:\n              res = _context.sent;\n              _context.next = 6;\n              return res.json();\n            case 6:\n              _yield$res$json = _context.sent;\n              _post = _yield$res$json.post;\n              setPost(_post);\n              _context.next = 14;\n              break;\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(_context.t0);\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 11]]);\n      }));\n      return function getPost() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    if (!post) {\n      getPost();\n    }\n  }, [post, id]);\n  useEffect(function () {\n    var getComments = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var res, _yield$res$json2, _comments;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return fetch(\"\".concat(process.env.RAZZLE_API_PATH, \"/posts/\").concat(id, \"/comments\"));\n            case 3:\n              res = _context2.sent;\n              _context2.next = 6;\n              return res.json();\n            case 6:\n              _yield$res$json2 = _context2.sent;\n              _comments = _yield$res$json2.comments;\n              setComments(_comments);\n              _context2.next = 14;\n              break;\n            case 11:\n              _context2.prev = 11;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error(_context2.t0);\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 11]]);\n      }));\n      return function getComments() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    if (post && !comments) {\n      getComments();\n    }\n  }, [post, comments, id]);\n  return __jsx(DefaultLayout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, post ? __jsx(\"article\", {\n    className: \"my-5 py-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, __jsx(Text, {\n    type: \"h1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, post === null || post === void 0 ? void 0 : post.title), __jsx(Date, {\n    text: \"Updated on\",\n    date: post === null || post === void 0 ? void 0 : post.updated_at,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }), __jsx(\"p\", {\n    className: \"my-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }, post === null || post === void 0 ? void 0 : post.body), __jsx(\"section\", {\n    className: \"border-t border-t-blue-300 pt-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, __jsx(Text, {\n    type: \"h2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, \"Comments (\", post === null || post === void 0 ? void 0 : post.comment_count, \")\"), __jsx(\"ul\", {\n    className: \"flex flex-col gap-4 mt-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 15\n    }\n  }, comments === null || comments === void 0 ? void 0 : comments.map(function (comment) {\n    return __jsx(\"li\", {\n      key: comment === null || comment === void 0 ? void 0 : comment.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 19\n      }\n    }, __jsx(Comment, {\n      display_name: comment.user.display_name,\n      content: comment.content,\n      updated_at: comment.updated_at,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }\n    }));\n  })))) : __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, LOADING_TEXT_BASE, \" writing!\"));\n};\nexport default Post;","map":{"version":3,"names":["useState","useEffect","useParams","DefaultLayout","Text","Date","Comment","LOADING_TEXT_BASE","Post","_useParams","id","_useState","post","setPost","_useState2","comments","setComments","getPost","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","_yield$res$json","_post","wrap","_callee$","_context","prev","next","fetch","concat","process","env","RAZZLE_API_PATH","sent","json","t0","console","error","stop","apply","arguments","getComments","_ref2","_callee2","_yield$res$json2","_comments","_callee2$","_context2","__jsx","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","type","title","text","date","updated_at","body","comment_count","map","comment","key","display_name","user","content"],"sources":["/Users/stevenkolock/Desktop/Side_Projects/place-blog/src/routes/blog/[id].jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useParams } from \"react-router-dom\";\nimport DefaultLayout from \"../../components/Layout/Default\";\nimport Text from '../../components/Typography/Text';\nimport Date from '../../components/Common/Date';\nimport Comment from '../../components/Comment/Comment';\nimport { LOADING_TEXT_BASE } from '../../constants';\n\n// {\"post\": {\"id\": 1, \"title\": \"A new post\", \"body\": \"Something very interesting!\", \"created_at\": \"2021-11-09T16:04:51.895Z\", \"updated_at\": \"2021-11-09T16:04:51.895Z\", \"comment_count\": 1, \"user\": {\"id\": 1, \"display_name\": \"Superman\"}}}\n\nconst Post = () => {\n  const { id } = useParams();\n  const [post, setPost] = useState(null);\n  const [comments, setComments] = useState(null);\n\n  useEffect(() => {\n    const getPost = async () => {\n      \n      try {\n        const res = await fetch(`${process.env.RAZZLE_API_PATH}/posts/${id}`);\n        const {post} =  await res.json();\n        setPost(post);\n      } catch (e) {\n        console.error(e);\n      }\n    }\n\n    if (!post) {\n      getPost()\n    }\n\n  }, [post, id])\n\n  useEffect(() => {\n    const getComments = async () => {\n      \n      try {\n        const res = await fetch(`${process.env.RAZZLE_API_PATH}/posts/${id}/comments`);\n        const {comments} =  await res.json();\n        setComments(comments);\n      } catch (e) {\n        console.error(e);\n      }\n    }\n\n    if (post && !comments) {\n      getComments()\n    }\n\n  }, [post, comments, id])\n \n  return (\n    <DefaultLayout>\n      {post ? (\n        <article className=\"my-5 py-4\">\n          <Text type=\"h1\">{post?.title}</Text>\n          <Date text=\"Updated on\" date={post?.updated_at} />\n          {/* <p>{post.updated_at.getMonth()} {post.updated_at.getDate()}, {post.updated_at.getYear()}</p> */}\n          <p className=\"my-4\">{post?.body}</p>\n          <section className=\"border-t border-t-blue-300 pt-4\">\n            <Text type=\"h2\">Comments ({post?.comment_count})</Text>\n            \n              <ul className=\"flex flex-col gap-4 mt-4\">\n                {comments?.map((comment) => (\n                  <li key={comment?.id}>\n                    <Comment display_name={comment.user.display_name} content={comment.content} updated_at={comment.updated_at} />\n                    </li>\n                  ))}\n              </ul>\n            </section>\n        </article>\n      ) : (\n        <p>{LOADING_TEXT_BASE} writing!</p>\n      )}\n      {/* <AddComment postId={id} /> */}\n    </DefaultLayout>\n  );\n};\n\nexport default Post;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}